services:
  memo-studio:
    build: .
    image: memo-studio:local
    ports:
      - "9000:9000"
    environment:
      # 必填：生产请务必设置（建议使用 openssl rand -base64 32 生成）
      MEMO_JWT_SECRET: "${MEMO_JWT_SECRET:-please-change-this-in-production}"
      # 推荐：用于初始化/重置管理员密码（不设置则首次启动随机生成并打印到日志）
      MEMO_ADMIN_PASSWORD: "${MEMO_ADMIN_PASSWORD:-}"
      # 可选：前端域名（逗号分隔），不填默认放开
      MEMO_CORS_ORIGINS: "${MEMO_CORS_ORIGINS:-}"
      PORT: "9000"
      MEMO_DB_PATH: "/data/notes.db"
      MEMO_STORAGE_DIR: "/data/storage"
      GIN_MODE: "release"
      MEMO_ENV: "production"
    volumes:
      - memo_data:/data
    restart: unless-stopped

volumes:
  memo_data:
